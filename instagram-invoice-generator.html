<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Instagram Invoice Generator | InstaOrderly</title>
<meta name="description" content="Professional Instagram invoice generator for Pakistani sellers. Multiple products, auto totals, PDF download and WhatsApp sharing.">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#0b1220;
  --card:#111827;
  --accent:#22c55e;
  --text:#e5e7eb;
}
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:var(--bg);
  color:var(--text);
}
.container{
  max-width:960px;
  margin:auto;
  padding:24px;
}
h1,h2,h3{color:var(--accent)}
input,textarea,select,button{
  width:100%;
  padding:12px;
  margin:6px 0;
  border-radius:8px;
  border:none;
  font-size:14px;
}
button{
  background:var(--accent);
  color:#000;
  font-weight:bold;
  cursor:pointer;
}
button.secondary{
  background:#1f2937;
  color:var(--text);
}
.section{
  background:var(--card);
  padding:16px;
  border-radius:12px;
  margin-bottom:20px;
}
.products .row{
  display:grid;
  grid-template-columns:2fr 1fr 1fr auto;
  gap:8px;
  margin-bottom:8px;
}
.products .row button{
  background:#ef4444;
  color:#fff;
}
.total{
  font-size:18px;
  font-weight:bold;
  margin-top:10px;
}
.error{
  color:#f87171;
  font-size:13px;
}
.invoice{
  background:#fff;
  color:#000;
  padding:24px;
  border-radius:10px;
  margin-top:24px;
  display:none;
}
.invoice table{
  width:100%;
  border-collapse:collapse;
  margin-top:12px;
}
.invoice th,.invoice td{
  border:1px solid #ccc;
  padding:8px;
  text-align:left;
}
.actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
@media(max-width:600px){
  .products .row{
    grid-template-columns:1fr 1fr;
  }
}
@media print{
  body *{visibility:hidden}
  .invoice,.invoice *{visibility:visible}
  .invoice{position:absolute;left:0;top:0;width:100%}
}
</style>
</head>

<body>
<div class="container">

<h1>Instagram Invoice Generator</h1>

<div class="section">
<h3>Seller Details</h3>
<input id="sellerName" placeholder="Business Name">
<input id="sellerWhatsapp" placeholder="WhatsApp Number">
</div>

<div class="section">
<h3>Customer Details</h3>
<input id="customerName" placeholder="Customer Name">
<input id="customerPhone" placeholder="Customer Phone">
<textarea id="customerAddress" placeholder="Delivery Address"></textarea>
</div>

<div class="section">
<h3>Products</h3>
<div class="products" id="products"></div>
<button onclick="addProduct()">+ Add Product</button>
<div class="total">Grand Total: PKR <span id="grandTotal">0</span></div>
<p class="error" id="productError"></p>
</div>

<div class="section">
<h3>Payment</h3>
<select id="paymentMethod">
  <option value="">Select Payment Method</option>
  <option>Cash on Delivery</option>
  <option>EasyPaisa</option>
  <option>JazzCash</option>
  <option>Bank Transfer</option>
</select>
</div>

<div class="section actions">
<button onclick="generateInvoice()">Generate Invoice</button>
<button class="secondary" onclick="downloadPDF()">Download PDF (Pro)</button>
<button class="secondary" onclick="shareWhatsApp()">Share on WhatsApp (Pro)</button>
<button class="secondary" onclick="unlockPro()">Unlock Pro</button>
</div>

<div class="invoice" id="invoice"></div>

</div>

<script>
/* ---------- STATE ---------- */
const state={
  products:[],
  pro:localStorage.getItem("instaorderly_pro")==="true"
};

/* ---------- UTIL ---------- */
function currency(n){return Number(n).toLocaleString("en-PK");}

/* ---------- PRO ---------- */
function unlockPro(){
  const code=prompt("Enter Pro Code");
  if(code==="INSTA-PRO-2025"){
    state.pro=true;
    localStorage.setItem("instaorderly_pro","true");
    alert("Pro Activated");
  }else alert("Invalid code");
}

/* ---------- PRODUCTS ---------- */
function addProduct(){
  if(!state.pro && state.products.length>=1){
    location.href="pricing.html";
    return;
  }
  state.products.push({name:"",price:0,qty:1});
  renderProducts();
}

function removeProduct(i){
  state.products.splice(i,1);
  renderProducts();
}

function updateProduct(i,field,val){
  state.products[i][field]=val;
  renderProducts();
}

function renderProducts(){
  const box=document.getElementById("products");
  box.innerHTML="";
  let total=0;

  state.products.forEach((p,i)=>{
    const sub=p.price*p.qty;
    total+=sub;

    box.innerHTML+=`
      <div class="row">
        <input placeholder="Product" value="${p.name}"
          oninput="updateProduct(${i},'name',this.value)">
        <input type="number" placeholder="Price" value="${p.price}"
          oninput="updateProduct(${i},'price',Number(this.value))">
        <input type="number" placeholder="Qty" value="${p.qty}"
          oninput="updateProduct(${i},'qty',Number(this.value))">
        <button onclick="removeProduct(${i})">X</button>
      </div>`;
  });

  document.getElementById("grandTotal").innerText=currency(total);
}

/* ---------- INVOICE ---------- */
function generateInvoice(){
  document.getElementById("productError").innerText="";

  if(state.products.length===0){
    document.getElementById("productError").innerText="Add at least one product";
    return;
  }

  const sName=sellerName.value.trim();
  const sWa=sellerWhatsapp.value.trim();
  const cName=customerName.value.trim();
  const cPhone=customerPhone.value.trim();
  const cAddr=customerAddress.value.trim();
  const pay=paymentMethod.value;

  if(!sName||!sWa||!cName||!cPhone||!cAddr||!pay){
    alert("Please fill all details");
    return;
  }

  let rows="",total=0;
  state.products.forEach(p=>{
    const sub=p.price*p.qty;
    total+=sub;
    rows+=`
      <tr>
        <td>${p.name}</td>
        <td>${currency(p.price)}</td>
        <td>${p.qty}</td>
        <td>${currency(sub)}</td>
      </tr>`;
  });

  invoice.style.display="block";
  invoice.innerHTML=`
    <h2>${sName}</h2>
    <p><b>WhatsApp:</b> ${sWa}</p>
    <hr>
    <p><b>Customer:</b> ${cName}</p>
    <p><b>Phone:</b> ${cPhone}</p>
    <p><b>Address:</b> ${cAddr}</p>

    <table>
      <tr><th>Product</th><th>Price</th><th>Qty</th><th>Total</th></tr>
      ${rows}
    </table>

    <h3>Grand Total: PKR ${currency(total)}</h3>
    <p><b>Payment:</b> ${pay}</p>
  `;
}

/* ---------- PDF ---------- */
function downloadPDF(){
  if(!state.pro){
    location.href="pricing.html";
    return;
  }
  window.print();
}

/* ---------- WHATSAPP ---------- */
function shareWhatsApp(){
  if(!state.pro){
    location.href="pricing.html";
    return;
  }
  const total=document.getElementById("grandTotal").innerText;
  const msg=Invoice from ${sellerName.value}\nTotal: PKR ${total}\nGenerated via InstaOrderly;
  window.open("https://wa.me/?text="+encodeURIComponent(msg));
}
</script>

</body>
</html>
